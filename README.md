# 🏦 Dynamic Rebalance Fund

一个现代化的动态基金再平衡管理系统，支持Web界面和命令行操作。

## ✨ 功能特性

- 🎯 **智能再平衡算法**: 基于设定阈值自动计算调仓建议
- 📊 **三桶投资策略**: 短期、中期、长期资产配置
- 🌐 **现代化Web界面**: 响应式设计，支持移动端
- 💻 **命令行模式**: 传统CLI操作界面
- 🔧 **实时操作**: 动态增删改基金配置
- 📈 **可视化展示**: 直观的权重和市值展示
- 💾 **数据持久化**: SQLite数据库存储，数据永不丢失
- 📜 **历史记录**: 完整的再平衡操作历史追溯
- 🔍 **智能验证**: 权重检查、数据校验等安全机制

## 🚀 快速开始

### Web模式 (推荐)

```bash
# 启动Web服务器
go run .

# 或者编译后运行
go build -o bin/fund-web-server
./bin/fund-web-server
```

然后访问: http://localhost:8080

### 命令行模式

```bash
go run . cli
```

## 🎮 Web界面功能

### 主要功能
1. **查看基金配置** - 按桶分类展示所有基金信息
2. **添加基金** - 支持选择桶、输入基金信息和权重验证
3. **编辑基金** - 实时修改基金名称、代码、市值、权重
4. **删除基金** - 一键删除不需要的基金
5. **执行再平衡** - 设置阈值，生成详细调仓清单
6. **历史记录** - 查看所有历史再平衡操作记录

### 界面特色
- 🎨 现代化Material Design风格
- 📱 完全响应式，支持手机和平板
- ⚡ 实时数据更新，无需刷新页面
- 🎭 直观的视觉反馈和动画效果
- 🔐 表单验证和错误处理

## 📊 投资策略

采用经典的**三桶投资法**:

### 🗂️ 短期桶 (10%) - 货币基金
- 提供流动性
- 满足日常开支需求

### 📈 中期桶 (30%) - 债券基金  
- 稳定收益
- 降低整体波动

### 🚀 长期桶 (60%) - 股票基金
- 长期增长
- 承担适度风险

## 🏗️ 项目结构

```
dynamic-rebalance-fund/
├── main.go              # 主程序入口 & CLI模式 & 核心算法
├── server.go            # Web服务器 & API接口
├── database.go          # SQLite数据库操作
├── fund_data.db         # SQLite数据库文件
├── go.mod               # Go模块依赖
├── templates/
│   └── index.html       # 主页模板
├── static/
│   ├── css/
│   │   └── style.css    # 样式文件
│   └── js/
│       └── app.js       # 前端交互逻辑
└── bin/                 # 编译后的可执行文件
```

## 🔧 技术栈

### 后端
- **Go 1.23+** - 主要编程语言
- **Gin** - 高性能Web框架
- **SQLite** - 轻量级数据库
- **CORS** - 跨域支持

### 前端  
- **Bootstrap 5** - UI框架
- **Font Awesome** - 图标库
- **Vanilla JavaScript** - 交互逻辑
- **Fetch API** - HTTP请求

## 📦 依赖安装

```bash
# 自动下载Go依赖
go mod tidy

# 前端依赖通过CDN加载，无需额外安装
```

## 🎯 API接口

| 方法 | 路径 | 功能 |
|------|------|------|
| GET | `/api/buckets` | 获取所有基金配置 |
| POST | `/api/funds` | 添加基金 |
| PUT | `/api/funds` | 更新基金信息 |
| DELETE | `/api/funds` | 删除基金 |
| POST | `/api/rebalance` | 执行再平衡分析 |
| GET | `/api/rebalance/history` | 获取再平衡历史记录 |
| GET | `/api/rebalance/history/:id` | 获取指定记录的详细信息 |

## 🌟 使用示例

1. **启动服务**: `go run .`
2. **打开浏览器**: 访问 http://localhost:8080
3. **查看配置**: 系统默认加载示例基金配置(来自SQLite数据库)
4. **添加基金**: 点击"添加基金"按钮，选择桶并填写信息
5. **执行再平衡**: 设置阈值(如5%)，查看调仓建议
6. **查看历史**: 点击"历史记录"查看所有再平衡操作
7. **调整配置**: 根据市场情况实时修改基金配置
8. **数据持久**: 所有操作自动保存到数据库，重启程序数据不丢失

## 🔍 核心算法

再平衡算法基于以下逻辑:

1. **计算总市值**: 所有基金当前市值之和
2. **确定目标配置**: 总市值 × 桶目标占比 × 基金权重
3. **偏差检测**: |当前占比 - 目标占比| > 阈值
4. **生成建议**: 
   - 超配 → 卖出
   - 低配 → 买入  
   - 在阈值内 → 保持不动

## 📈 最佳实践

- **设置合理阈值**: 建议3%-8%，避免频繁交易
- **定期检查**: 建议每月执行一次再平衡分析
- **权重控制**: 桶内基金权重总和不超过100%
- **数据安全**: SQLite数据库自动保存，建议定期备份fund_data.db文件
- **历史追溯**: 定期查看历史记录，分析投资策略效果

## 💾 数据存储

### 数据库表结构
- **buckets**: 存储桶配置(短期/中期/长期)
- **funds**: 存储基金详细信息
- **rebalance_records**: 再平衡操作记录
- **rebalance_suggestions**: 每次再平衡的具体建议

### 数据文件
- 📁 `fund_data.db`: SQLite数据库文件，包含所有持久化数据
- 🔄 程序启动时自动创建数据库和初始数据
- 💾 所有操作实时保存，无需手动保存

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

## 📄 许可证

MIT License
